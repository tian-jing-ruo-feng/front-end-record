<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>其他常见问题 | 天净若风 の 前端笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="天净若风的记录前端">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/front-end-record/assets/css/0.styles.0bd3a692.css" as="style"><link rel="preload" href="/front-end-record/assets/js/app.737c7091.js" as="script"><link rel="preload" href="/front-end-record/assets/js/2.b3e11e55.js" as="script"><link rel="preload" href="/front-end-record/assets/js/32.7fbb70be.js" as="script"><link rel="prefetch" href="/front-end-record/assets/js/10.7347d109.js"><link rel="prefetch" href="/front-end-record/assets/js/11.815351c7.js"><link rel="prefetch" href="/front-end-record/assets/js/12.e73ef52c.js"><link rel="prefetch" href="/front-end-record/assets/js/13.23704986.js"><link rel="prefetch" href="/front-end-record/assets/js/14.853118d7.js"><link rel="prefetch" href="/front-end-record/assets/js/15.6a2d715c.js"><link rel="prefetch" href="/front-end-record/assets/js/16.bddbcebc.js"><link rel="prefetch" href="/front-end-record/assets/js/17.022bb3e7.js"><link rel="prefetch" href="/front-end-record/assets/js/18.1067f79d.js"><link rel="prefetch" href="/front-end-record/assets/js/19.41b81865.js"><link rel="prefetch" href="/front-end-record/assets/js/20.d1bb140b.js"><link rel="prefetch" href="/front-end-record/assets/js/21.feee165c.js"><link rel="prefetch" href="/front-end-record/assets/js/22.f82bc2b3.js"><link rel="prefetch" href="/front-end-record/assets/js/23.98d69f94.js"><link rel="prefetch" href="/front-end-record/assets/js/24.450d1c08.js"><link rel="prefetch" href="/front-end-record/assets/js/25.2e93b8e6.js"><link rel="prefetch" href="/front-end-record/assets/js/26.ed12b312.js"><link rel="prefetch" href="/front-end-record/assets/js/27.127305a4.js"><link rel="prefetch" href="/front-end-record/assets/js/28.bc5ba84f.js"><link rel="prefetch" href="/front-end-record/assets/js/29.0d17fac9.js"><link rel="prefetch" href="/front-end-record/assets/js/3.439506d9.js"><link rel="prefetch" href="/front-end-record/assets/js/30.f15d3dd2.js"><link rel="prefetch" href="/front-end-record/assets/js/31.f9210722.js"><link rel="prefetch" href="/front-end-record/assets/js/33.e6da5e43.js"><link rel="prefetch" href="/front-end-record/assets/js/34.bfe1b7db.js"><link rel="prefetch" href="/front-end-record/assets/js/35.02d88f5f.js"><link rel="prefetch" href="/front-end-record/assets/js/36.6808352c.js"><link rel="prefetch" href="/front-end-record/assets/js/37.71757c77.js"><link rel="prefetch" href="/front-end-record/assets/js/4.79be6ffe.js"><link rel="prefetch" href="/front-end-record/assets/js/5.b453b286.js"><link rel="prefetch" href="/front-end-record/assets/js/6.c8609ea1.js"><link rel="prefetch" href="/front-end-record/assets/js/7.2151b837.js"><link rel="prefetch" href="/front-end-record/assets/js/8.86283c33.js"><link rel="prefetch" href="/front-end-record/assets/js/9.94355e58.js">
    <link rel="stylesheet" href="/front-end-record/assets/css/0.styles.0bd3a692.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front-end-record/" class="home-link router-link-active"><!----> <span class="site-name">天净若风 の 前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-record/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/front-end-record/docker/" class="nav-link">
  Docker
</a></div><div class="nav-item"><a href="/front-end-record/antvx6/" class="nav-link">
  AntV X6
</a></div><div class="nav-item"><a href="/front-end-record/ts/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript设计模式" class="dropdown-title"><span class="title">JavaScript设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript设计模式" class="mobile-dropdown-title"><span class="title">JavaScript设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-record/designmode/intro/" class="nav-link">
  灵活的JavaScript
</a></li><li class="dropdown-item"><h4>
          创建型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  工厂模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  建造者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  原型模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  单例模式
</a></li></ul></li><li class="dropdown-item"><h4>
          结构型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  外观模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  适配器模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  代理模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  装饰者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  桥接模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  组合模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  享元模式
</a></li></ul></li><li class="dropdown-item"><h4>
          行为型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  模版方法模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  观察者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  状态模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  策略模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  职责链模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  命令模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  访问者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  中介者者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  备忘录模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  迭代器模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  解释器模式
</a></li></ul></li><li class="dropdown-item"><h4>
          技巧型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  链模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  委托模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  数据访问
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  节流模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  简单模版模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  惰性模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  参与者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  等待者模式
</a></li></ul></li><li class="dropdown-item"><h4>
          架构型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  同步模块模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  异步模块模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  Widget模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  MVC模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  MVP模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  MVVM模式
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Pinia" class="dropdown-title"><span class="title">Pinia</span> <span class="arrow down"></span></button> <button type="button" aria-label="Pinia" class="mobile-dropdown-title"><span class="title">Pinia</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-record/pinia/" class="nav-link">
  Pinia系统学习
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-record/face-to-face/" class="nav-link router-link-active">
  面经
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-record/about/" class="nav-link">
  简介
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-record/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/front-end-record/docker/" class="nav-link">
  Docker
</a></div><div class="nav-item"><a href="/front-end-record/antvx6/" class="nav-link">
  AntV X6
</a></div><div class="nav-item"><a href="/front-end-record/ts/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript设计模式" class="dropdown-title"><span class="title">JavaScript设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript设计模式" class="mobile-dropdown-title"><span class="title">JavaScript设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-record/designmode/intro/" class="nav-link">
  灵活的JavaScript
</a></li><li class="dropdown-item"><h4>
          创建型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  工厂模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  建造者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  原型模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  单例模式
</a></li></ul></li><li class="dropdown-item"><h4>
          结构型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  外观模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  适配器模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  代理模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  装饰者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  桥接模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  组合模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  享元模式
</a></li></ul></li><li class="dropdown-item"><h4>
          行为型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  模版方法模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  观察者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  状态模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  策略模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  职责链模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  命令模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  访问者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  中介者者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  备忘录模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  迭代器模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  解释器模式
</a></li></ul></li><li class="dropdown-item"><h4>
          技巧型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  链模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  委托模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  数据访问
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  节流模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  简单模版模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  惰性模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  参与者模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  等待者模式
</a></li></ul></li><li class="dropdown-item"><h4>
          架构型设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  同步模块模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  异步模块模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  Widget模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  MVC模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  MVP模式
</a></li><li class="dropdown-subitem"><a href="/front-end-record/designmode/factory-mode.html" class="nav-link">
  MVVM模式
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Pinia" class="dropdown-title"><span class="title">Pinia</span> <span class="arrow down"></span></button> <button type="button" aria-label="Pinia" class="mobile-dropdown-title"><span class="title">Pinia</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-record/pinia/" class="nav-link">
  Pinia系统学习
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-record/face-to-face/" class="nav-link router-link-active">
  面经
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-record/about/" class="nav-link">
  简介
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面经</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front-end-record/face-to-face/" aria-current="page" class="sidebar-link">前端面试</a></li><li><a href="/front-end-record/face-to-face/01-HTML相关问题.html" class="sidebar-link">HTML 相关问题</a></li><li><a href="/front-end-record/face-to-face/02-CSS相关问题.html" class="sidebar-link">CSS 相关问题</a></li><li><a href="/front-end-record/face-to-face/03-JavaScript相关问题.html" class="sidebar-link">JavaScript 相关问题</a></li><li><a href="/front-end-record/face-to-face/04-框架和库.html" class="sidebar-link">框架和库</a></li><li><a href="/front-end-record/face-to-face/05-工具和构建.html" class="sidebar-link">工具和构建</a></li><li><a href="/front-end-record/face-to-face/06-性能优化.html" class="sidebar-link">性能优化</a></li><li><a href="/front-end-record/face-to-face/07-其他常见问题.html" class="active sidebar-link">其他常见问题</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="其他常见问题"><a href="#其他常见问题" class="header-anchor">#</a> 其他常见问题</h1> <ol><li><p><strong><em>【讨论题】谈一谈 Node 和 Web 的事件循环（EventLoop）机制的异同</em></strong></p> <p><strong>题目描述：</strong>
通过前面章节，我们了解到 Lerna 源码中利用了 EventLoop 机制将脚手架初始化和命令执行逻辑解耦，这是 EventLoop 的一个典型应用，然而 Node.js 的 EventLoop 和 Web 的 EventLoop 并不相同，你知道他们之间有哪些差异吗？你是否在实际项目中应用过 Node.js 的 setImmediate 和 process.nextTick 方法？如果有，请分享你在哪些场景下使用了这些方法，并指出你为什么在这种场景使用，它会带来什么好处？</p> <p><strong>关键提炼：</strong></p> <ol><li>Node.js 事件循环：http://nodejs.cn/learn/the-nodejs-event-loop</li> <li>什么是 process.nextTick：http://nodejs.cn/learn/understanding-process-nexttick</li> <li>什么是 setImmediate：http://nodejs.cn/learn/understanding-setimmediate</li> <li>Web 和 Node.js 事件循环对比：http://www.ruanyifeng.com/blog/2014/10/event-loop.html</li></ol> <h4 id="nodejs-事件轮询"><a href="#nodejs-事件轮询" class="header-anchor">#</a> <code>Nodejs</code> <a href="https://nodejs.org/en/learn/asynchronous-work/event-loop-timers-and-nexttick#process-nexttick" title="Nodejs Event Loop" target="_blank" rel="noopener noreferrer">事件轮询<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>共<strong>六</strong>阶段： <strong>timer</strong> -&gt; <strong>Pending I/O callbacks</strong> -&gt; <strong>Idle, prepare</strong> -&gt; <strong>Poll</strong> -&gt; <strong>Check</strong> -&gt; <strong>Close callbacks</strong></p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b04e82718ead4bd09ee9b8aaaaa4b414~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="事件循环"></p> <ol><li><h3 id="timer"><a href="#timer" class="header-anchor">#</a> timer</h3></li></ol> <p>​ 定时器阶段，处理<code>setTimeout</code>和<code>setInterval</code>的回调函数。进入这个阶段，主线程会检查当前时间是否满足定时器的条件，满足则执行回调函数，否则离开这个阶段。</p> <ol start="2"><li><h3 id="pending-i-o-callbacks"><a href="#pending-i-o-callbacks" class="header-anchor">#</a> Pending I/O callbacks</h3> <p>​ 除了以下操作</p> <ul><li><p><code>setTimeout()</code>和<code>setInterval()</code>的回调函数。（它们在 timer 阶段执行）</p></li> <li><p><code>setImmediate()</code>的回调函数。（它在 Check 阶段执行）</p></li> <li><p>用于关闭请求的回调函数，例如<code>socket.on('close', ...)</code>。（它是在 Close callbacks 阶段执行）</p> <p>其他的回调函数都是在这个阶段执行。</p></li></ul></li> <li><h3 id="idle-prepare"><a href="#idle-prepare" class="header-anchor">#</a> Idle, prepare</h3> <p>​ 该阶段只供<code>libuv</code>内部调用，可以忽略。</p></li> <li><h3 id="poll"><a href="#poll" class="header-anchor">#</a> Poll</h3> <p>​ 这个阶段是轮询阶段，用于等待还未返回的 I/O 事件，例如服务器的回应，用户鼠标事件等等。这个阶段耗时会比较长。如果没有其他异步任务要处理（比如到期的定时器），会一直停留在这个阶段，等待 I/O 请求返回结果。</p></li> <li><h3 id="check"><a href="#check" class="header-anchor">#</a> Check</h3> <p>​ 该阶段执行<code>setImmediate()</code>的回调函数。</p></li> <li><h3 id="close-callbacks"><a href="#close-callbacks" class="header-anchor">#</a> Close callbacks</h3> <p>​ 该阶段执行关闭请求的回调函数。比如<code>socket.on('close', ...)</code>。</p></li></ol> <h3 id="微任务-vs-宏任务"><a href="#微任务-vs-宏任务" class="header-anchor">#</a> 微任务 VS 宏任务</h3> <p>​ 为了解决同步问题（前一个操作耗时问题，导致不能再执行下去），JavaScript 引入了<strong>异步</strong>的概念。除了主线程上的同步操作外，JavaScript 还有个<strong>任务队列（task queue)</strong>。所有的大开销的任务我们都可以通过异步函数包裹一下，通过回调函数的方式去触发，我们只需要先把大开销的操作任务扔到<strong>任务队列</strong>中，等待主线程上的同步任务执行完毕后，再去<strong>轮询</strong>任务队列中的事件，满足执行条件的事件放到主线程上去执行。</p> <p>​ <code>js</code>将异步任务划分为微任务和宏任务，微任务会在宏任务之前执行（因为每次从主线程切换到任务队列时，<strong>都会优先遍历微任务队列，后遍历宏任务队列</strong>）。</p> <p>​ <strong><em>注意：只有微任务队列为空时，才会遍历宏任务队列，并且每次从主线程切入任务队列时，都会优先遍历一边微任务队列。</em></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 宏任务</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 微任务</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 执行结果: 1 2 3 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><table><thead><tr><th>宏任务 Macro Task</th> <th></th> <th></th> <th>微任务 Micro Task</th> <th></th> <th></th></tr></thead> <tbody><tr><td>名称</td> <td>浏览器</td> <td>Node</td> <td>名称</td> <td>浏览器</td> <td>Node</td></tr> <tr><td>I/O 操作</td> <td>√</td> <td>√</td> <td><code>process.nextTick()</code>(优先推荐使用<code>queueMicroTask()</code>)</td> <td>×</td> <td>√</td></tr> <tr><td><code>setTimeout</code></td> <td>√</td> <td>√</td> <td><code>Promise.then catch finally</code></td> <td>√</td> <td>√</td></tr> <tr><td><code>setInterval</code></td> <td>√</td> <td>√</td> <td><code>MutationObserver</code>(接口提供了监视对 DOM 树所做更改的能力)</td> <td>√</td> <td>×</td></tr> <tr><td><code>setImmediate</code></td> <td>×</td> <td>√</td> <td></td> <td></td> <td></td></tr> <tr><td><code>requestAnimationFrame</code><br>告诉浏览器——你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次重绘之前执行。</td> <td>√</td> <td>×</td> <td></td> <td></td> <td></td></tr></tbody></table> <h3 id="process-nexttick"><a href="#process-nexttick" class="header-anchor">#</a> <code>process.nextTick</code></h3> <p>node 中特有的异步方法，属于<strong>微任务</strong>，但是<strong>在微任务中，它的执行时机是最早的</strong>，比<code>Promise.then</code>还早。</p> <h3 id="setimmediate"><a href="#setimmediate" class="header-anchor">#</a> <code>setImmediate</code></h3> <p>node 中特有的异步操作，只支持 node 端，属于<strong>宏任务</strong>。</p> <h3 id="settimeout-vs-setimmediate"><a href="#settimeout-vs-setimmediate" class="header-anchor">#</a> <code>setTimeout VS setImmediate</code></h3> <p><strong>setTimeout</strong> 和 <strong>setImmediate</strong> 都是用于调度异步任务的函数，但它们在执行时机上有所不同。以下是它们的区别和使用场景：</p> <p><strong>setTimeout</strong></p> <p><strong>用法：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="nodejs-vs-web事件循环"><a href="#nodejs-vs-web事件循环" class="header-anchor">#</a> <code>Nodejs VS Web</code>事件循环</h3> <h3 id="进程-线程"><a href="#进程-线程" class="header-anchor">#</a> 进程&amp;线程</h3> <p><strong>线程和进程：线程时最小的执行单位，而进程有至少一个线程组成。</strong></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3 months ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front-end-record/face-to-face/06-性能优化.html" class="prev">
        性能优化
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/front-end-record/assets/js/app.737c7091.js" defer></script><script src="/front-end-record/assets/js/2.b3e11e55.js" defer></script><script src="/front-end-record/assets/js/32.7fbb70be.js" defer></script>
  </body>
</html>
